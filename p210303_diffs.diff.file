diff --git a/DataFormats/Alignment/BuildFile.xml b/DataFormats/Alignment/BuildFile.xml
index 7b654617c98..2114ee0ec72 100644
--- a/DataFormats/Alignment/BuildFile.xml
+++ b/DataFormats/Alignment/BuildFile.xml
@@ -2,6 +2,9 @@
 <use name="DataFormats/TrackingRecHit"/>
 <use name="DataFormats/SiStripDetId"/>
 <use name="FWCore/Utilities"/>
+<use name="DataFormats/CLHEP"/>
+<use name="DataFormats/DetId"/>
+<use name="DataFormats/GeometrySurface"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/BTauReco/BuildFile.xml b/DataFormats/BTauReco/BuildFile.xml
index d61fb0cdf68..8dcec2898d2 100644
--- a/DataFormats/BTauReco/BuildFile.xml
+++ b/DataFormats/BTauReco/BuildFile.xml
@@ -5,6 +5,10 @@
 <use name="DataFormats/TrackReco"/>
 <use name="DataFormats/VertexReco"/>
 <use name="FWCore/Utilities"/>
+<use name="DataFormats/Candidate"/>
+<use name="DataFormats/EgammaReco"/>
+<use name="DataFormats/GeometryCommonDetAlgo"/>
+<use name="DataFormats/GeometryVector"/>
 <use name="boost"/>
 <use name="clhep"/>
 <use name="rootmath"/>
diff --git a/DataFormats/BeamSpot/BuildFile.xml b/DataFormats/BeamSpot/BuildFile.xml
index 2e6117fdaf7..aa43b789310 100644
--- a/DataFormats/BeamSpot/BuildFile.xml
+++ b/DataFormats/BeamSpot/BuildFile.xml
@@ -1,5 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/CLHEP"/>
+<use name="DataFormats/GeometrySurface"/>
+<use name="DataFormats/Math"/>
 <use name="rootcore"/>
 <use name="rootsmatrix"/>
 <use name="clhep"/>
diff --git a/DataFormats/CSCDigi/BuildFile.xml b/DataFormats/CSCDigi/BuildFile.xml
index d6439ed2323..dfa11714624 100644
--- a/DataFormats/CSCDigi/BuildFile.xml
+++ b/DataFormats/CSCDigi/BuildFile.xml
@@ -1,6 +1,8 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/MuonDetId"/>
 <use name="DataFormats/GEMDigi"/>
+<use name="DataFormats/MuonData"/>
+<use name="FWCore/MessageLogger"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/CTPPSDetId/BuildFile.xml b/DataFormats/CTPPSDetId/BuildFile.xml
index 5a1d1280da4..7b963c0dd30 100644
--- a/DataFormats/CTPPSDetId/BuildFile.xml
+++ b/DataFormats/CTPPSDetId/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/DetId"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/CTPPSDigi/BuildFile.xml b/DataFormats/CTPPSDigi/BuildFile.xml
index 7c537d9ebb9..38b45babc72 100644
--- a/DataFormats/CTPPSDigi/BuildFile.xml
+++ b/DataFormats/CTPPSDigi/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/Common"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/CTPPSReco/BuildFile.xml b/DataFormats/CTPPSReco/BuildFile.xml
index 41320fa24a3..10ada3e0924 100644
--- a/DataFormats/CTPPSReco/BuildFile.xml
+++ b/DataFormats/CTPPSReco/BuildFile.xml
@@ -2,6 +2,8 @@
 <use name="DataFormats/CTPPSDigi"/>
 <use name="DataFormats/GeometrySurface"/>
 <use name="DataFormats/Math"/>
+<use name="DataFormats/CTPPSDetId"/>
+<use name="DataFormats/GeometryVector"/>
 <use name="rootsmatrix"/>
 <use name="rootmath"/>
 <use name="rootphysics"/>
diff --git a/DataFormats/CaloRecHit/BuildFile.xml b/DataFormats/CaloRecHit/BuildFile.xml
index 3a36baafe8b..135aabf10cd 100644
--- a/DataFormats/CaloRecHit/BuildFile.xml
+++ b/DataFormats/CaloRecHit/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/Math"/>
 <use name="DataFormats/DetId"/>
+<use name="FWCore/Utilities"/>
 <use name="rootmath"/>
 <use name="eigen"/>
 <export>
diff --git a/DataFormats/CastorReco/BuildFile.xml b/DataFormats/CastorReco/BuildFile.xml
index 6b20714cdb2..f8590afedc9 100644
--- a/DataFormats/CastorReco/BuildFile.xml
+++ b/DataFormats/CastorReco/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/Candidate"/>
 <use name="DataFormats/HcalRecHit"/>
+<use name="DataFormats/Math"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/EcalDigi/BuildFile.xml b/DataFormats/EcalDigi/BuildFile.xml
index 5b1ead14f94..7e3d70b84fb 100644
--- a/DataFormats/EcalDigi/BuildFile.xml
+++ b/DataFormats/EcalDigi/BuildFile.xml
@@ -1,5 +1,8 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/EcalDetId"/>
+<use name="DataFormats/DetId"/>
+<use name="FWCore/MessageLogger"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/EcalRecHit/BuildFile.xml b/DataFormats/EcalRecHit/BuildFile.xml
index 3b88044dd0c..e38ee48a95b 100644
--- a/DataFormats/EcalRecHit/BuildFile.xml
+++ b/DataFormats/EcalRecHit/BuildFile.xml
@@ -2,6 +2,8 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/EcalDetId"/>
 <use name="DataFormats/EcalDigi"/>
+<use name="DataFormats/DetId"/>
+<use name="FWCore/MessageLogger"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/EgammaCandidates/BuildFile.xml b/DataFormats/EgammaCandidates/BuildFile.xml
index 3b9adcd56ab..673252ed2d9 100644
--- a/DataFormats/EgammaCandidates/BuildFile.xml
+++ b/DataFormats/EgammaCandidates/BuildFile.xml
@@ -13,6 +13,7 @@
 <use name="DataFormats/GsfTrackReco"/>
 <use name="DataFormats/GeometryCommonDetAlgo"/>
 <use name="FWCore/MessageLogger"/>
+<use name="DataFormats/GeometryVector"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/EgammaReco/BuildFile.xml b/DataFormats/EgammaReco/BuildFile.xml
index 98b3ad34f11..993fe380a53 100644
--- a/DataFormats/EgammaReco/BuildFile.xml
+++ b/DataFormats/EgammaReco/BuildFile.xml
@@ -5,6 +5,9 @@
 <use name="DataFormats/TrackingRecHit"/>
 <use name="DataFormats/TrajectorySeed"/>
 <use name="DataFormats/TrackReco"/>
+<use name="DataFormats/DetId"/>
+<use name="DataFormats/Math"/>
+<use name="DataFormats/TrajectoryState"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/EgammaTrackReco/BuildFile.xml b/DataFormats/EgammaTrackReco/BuildFile.xml
index 9afb2bb3258..6a0ffe9b834 100644
--- a/DataFormats/EgammaTrackReco/BuildFile.xml
+++ b/DataFormats/EgammaTrackReco/BuildFile.xml
@@ -4,6 +4,7 @@
 <use name="DataFormats/CaloRecHit"/>
 <use name="DataFormats/TrackCandidate"/>
 <use name="DataFormats/TrackingRecHit"/>
+<use name="DataFormats/CLHEP"/>
 <use name="clhepheader"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/FP420Cluster/BuildFile.xml b/DataFormats/FP420Cluster/BuildFile.xml
index 7c537d9ebb9..b8bd3c7e515 100644
--- a/DataFormats/FP420Cluster/BuildFile.xml
+++ b/DataFormats/FP420Cluster/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/Common"/>
+<use name="DataFormats/FP420Digi"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/FTLDigi/BuildFile.xml b/DataFormats/FTLDigi/BuildFile.xml
index 15d7f7b3264..27ab1f66892 100644
--- a/DataFormats/FTLDigi/BuildFile.xml
+++ b/DataFormats/FTLDigi/BuildFile.xml
@@ -1,5 +1,6 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/ForwardDetId"/>
+<use name="DataFormats/DetId"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/GEMDigi/BuildFile.xml b/DataFormats/GEMDigi/BuildFile.xml
index ba133c8e101..4eecf7bb271 100644
--- a/DataFormats/GEMDigi/BuildFile.xml
+++ b/DataFormats/GEMDigi/BuildFile.xml
@@ -1,6 +1,8 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/MuonDetId"/>
 <use name="DataFormats/GEMRecHit"/>
+<use name="DataFormats/MuonData"/>
+<use name="FWCore/MessageLogger"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/GEMRecHit/BuildFile.xml b/DataFormats/GEMRecHit/BuildFile.xml
index 9ecef8c127d..7c61a5807f3 100644
--- a/DataFormats/GEMRecHit/BuildFile.xml
+++ b/DataFormats/GEMRecHit/BuildFile.xml
@@ -2,6 +2,7 @@
 <use name="DataFormats/MuonDetId"/>
 <use name="DataFormats/TrackingRecHit"/>
 <use name="DataFormats/CSCRecHit"/>
+<use name="FWCore/MessageLogger"/>
 <use name="rootrflx"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/GeometrySurface/BuildFile.xml b/DataFormats/GeometrySurface/BuildFile.xml
index 2ba0299686a..07cf24d28a8 100644
--- a/DataFormats/GeometrySurface/BuildFile.xml
+++ b/DataFormats/GeometrySurface/BuildFile.xml
@@ -1,4 +1,6 @@
 <use name="DataFormats/GeometryVector"/>
+<use name="DataFormats/Math"/>
+<use name="FWCore/Utilities"/>
 <use name="boost"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/GsfTrackReco/BuildFile.xml b/DataFormats/GsfTrackReco/BuildFile.xml
index 061af954fdd..dacd02efb3a 100644
--- a/DataFormats/GsfTrackReco/BuildFile.xml
+++ b/DataFormats/GsfTrackReco/BuildFile.xml
@@ -1,5 +1,8 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/TrackReco"/>
+<use name="DataFormats/GeometryCommonDetAlgo"/>
+<use name="DataFormats/Math"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/HGCDigi/BuildFile.xml b/DataFormats/HGCDigi/BuildFile.xml
index d410cbfccec..f3a1b78798f 100644
--- a/DataFormats/HGCDigi/BuildFile.xml
+++ b/DataFormats/HGCDigi/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/ForwardDetId"/>
 <use name="DataFormats/HcalDetId"/>
+<use name="DataFormats/DetId"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/HGCRecHit/BuildFile.xml b/DataFormats/HGCRecHit/BuildFile.xml
index eb5042c528e..dcb63ce8125 100644
--- a/DataFormats/HGCRecHit/BuildFile.xml
+++ b/DataFormats/HGCRecHit/BuildFile.xml
@@ -2,6 +2,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/ForwardDetId"/>
 <use name="DataFormats/HcalDetId"/>
+<use name="DataFormats/DetId"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/HGCalReco/BuildFile.xml b/DataFormats/HGCalReco/BuildFile.xml
index e168223e87f..ea59e350657 100644
--- a/DataFormats/HGCalReco/BuildFile.xml
+++ b/DataFormats/HGCalReco/BuildFile.xml
@@ -3,6 +3,7 @@
 <use name="DataFormats/Candidate"/>
 <use name="DataFormats/Common"/>
 <use name="DataFormats/TrackReco"/>
+<use name="DataFormats/GeometryVector"/>
 <use name="eigen"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/HLTReco/BuildFile.xml b/DataFormats/HLTReco/BuildFile.xml
index ebf0965502d..d7fd9b90461 100644
--- a/DataFormats/HLTReco/BuildFile.xml
+++ b/DataFormats/HLTReco/BuildFile.xml
@@ -12,6 +12,7 @@
 <use name="DataFormats/L1TParticleFlow"/>
 <use name="DataFormats/L1TCorrelator"/>
 <use name="FWCore/MessageLogger"/>
+<use name="DataFormats/GsfTrackReco"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/HcalCalibObjects/BuildFile.xml b/DataFormats/HcalCalibObjects/BuildFile.xml
index 2e32b563d83..3c38aaa2da0 100644
--- a/DataFormats/HcalCalibObjects/BuildFile.xml
+++ b/DataFormats/HcalCalibObjects/BuildFile.xml
@@ -1,5 +1,6 @@
 <use name="DataFormats/Common"/>
 <use name="FWCore/ParameterSet"/>
+<use name="FWCore/MessageLogger"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/HcalDetId/BuildFile.xml b/DataFormats/HcalDetId/BuildFile.xml
index 7b963c0dd30..2582aa71146 100644
--- a/DataFormats/HcalDetId/BuildFile.xml
+++ b/DataFormats/HcalDetId/BuildFile.xml
@@ -1,5 +1,6 @@
 <use name="DataFormats/DetId"/>
 <use name="FWCore/Utilities"/>
+<use name="FWCore/MessageLogger"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/HcalDigi/BuildFile.xml b/DataFormats/HcalDigi/BuildFile.xml
index cee2c128fcd..5227530aaaa 100644
--- a/DataFormats/HcalDigi/BuildFile.xml
+++ b/DataFormats/HcalDigi/BuildFile.xml
@@ -1,5 +1,6 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/HcalDetId"/>
+<use name="DataFormats/DetId"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/Histograms/BuildFile.xml b/DataFormats/Histograms/BuildFile.xml
index 5e41c097842..62f34e0d7a7 100644
--- a/DataFormats/Histograms/BuildFile.xml
+++ b/DataFormats/Histograms/BuildFile.xml
@@ -1,5 +1,7 @@
 <use name="roothistmatrix"/>
 <use name="DataFormats/Common"/>
+<use name="DataFormats/Provenance"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/JetReco/BuildFile.xml b/DataFormats/JetReco/BuildFile.xml
index c17b5dc73a0..f3ecf3960c0 100644
--- a/DataFormats/JetReco/BuildFile.xml
+++ b/DataFormats/JetReco/BuildFile.xml
@@ -6,6 +6,10 @@
 <use name="DataFormats/ParticleFlowReco"/>
 <use name="DataFormats/TrackReco"/>
 <use name="FWCore/Utilities"/>
+<use name="DataFormats/Math"/>
+<use name="DataFormats/RecoCandidate"/>
+<use name="DataFormats/VertexReco"/>
+<use name="FWCore/MessageLogger"/>
 <flags LCG_DICT_HEADER="classes_1.h classes_2.h classes_3.h classes_4.h"/>
 <flags LCG_DICT_XML="classes_def_1.xml classes_def_2.xml classes_def_3.xml classes_def_4.xml"/>
 <export>
diff --git a/DataFormats/L1TCalorimeterPhase2/BuildFile.xml b/DataFormats/L1TCalorimeterPhase2/BuildFile.xml
index e8fab975410..732b899908e 100644
--- a/DataFormats/L1TCalorimeterPhase2/BuildFile.xml
+++ b/DataFormats/L1TCalorimeterPhase2/BuildFile.xml
@@ -1,4 +1,7 @@
 <use name="DataFormats/L1Trigger"/>
+<use name="DataFormats/Common"/>
+<use name="DataFormats/DetId"/>
+<use name="FWCore/MessageLogger"/>
 <use name="rootrflx"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/L1TGlobal/BuildFile.xml b/DataFormats/L1TGlobal/BuildFile.xml
index 3ddb67cbcc8..ad09aa959bb 100644
--- a/DataFormats/L1TGlobal/BuildFile.xml
+++ b/DataFormats/L1TGlobal/BuildFile.xml
@@ -1,5 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/L1Trigger"/>
+<use name="FWCore/MessageLogger"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/L1THGCal/BuildFile.xml b/DataFormats/L1THGCal/BuildFile.xml
index 855a2f46f4b..a81d1b9fd18 100644
--- a/DataFormats/L1THGCal/BuildFile.xml
+++ b/DataFormats/L1THGCal/BuildFile.xml
@@ -4,6 +4,8 @@
 <use name="DataFormats/ForwardDetId"/>
 <use name="DataFormats/GeometryVector"/>
 <use name="FWCore/Utilities"/>
+<use name="DataFormats/HcalDetId"/>
+<use name="FWCore/MessageLogger"/>
 <use name="rootrflx"/>
 <use name="boost"/>
 <export>
diff --git a/DataFormats/L1TMuon/BuildFile.xml b/DataFormats/L1TMuon/BuildFile.xml
index 71988edc547..93dbcf323a8 100644
--- a/DataFormats/L1TMuon/BuildFile.xml
+++ b/DataFormats/L1TMuon/BuildFile.xml
@@ -6,5 +6,6 @@
 <use name="DataFormats/MuonDetId"/>
 <use name="DataFormats/Common"/>
 <use name="DataFormats/Candidate"/>
+<use name="DataFormats/L1Trigger"/>
 <use name="rootrflx"/>
 <flags ADD_SUBDIR="1"/>
diff --git a/DataFormats/L1TrackTrigger/BuildFile.xml b/DataFormats/L1TrackTrigger/BuildFile.xml
index 54723d87ca3..81cd982c6b4 100644
--- a/DataFormats/L1TrackTrigger/BuildFile.xml
+++ b/DataFormats/L1TrackTrigger/BuildFile.xml
@@ -5,6 +5,9 @@
 <use name="DataFormats/Phase2TrackerDigi"/>
 <use name="DataFormats/SiStripDetId"/>
 <use name="DataFormats/TrackerCommon"/>
+<use name="FWCore/MessageLogger"/>
+<use name="FWCore/Utilities"/>
+<use name="SimDataFormats/TrackingAnalysis"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/L1Trigger/BuildFile.xml b/DataFormats/L1Trigger/BuildFile.xml
index 0a412dcbebe..8a8f538c154 100644
--- a/DataFormats/L1Trigger/BuildFile.xml
+++ b/DataFormats/L1Trigger/BuildFile.xml
@@ -3,6 +3,7 @@
 <use name="DataFormats/L1GlobalCaloTrigger"/>
 <use name="DataFormats/L1GlobalMuonTrigger"/>
 <use name="DataFormats/HcalDetId"/>
+<use name="FWCore/Concurrency"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/LTCDigi/BuildFile.xml b/DataFormats/LTCDigi/BuildFile.xml
index 7c537d9ebb9..38b45babc72 100644
--- a/DataFormats/LTCDigi/BuildFile.xml
+++ b/DataFormats/LTCDigi/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/Common"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/METReco/BuildFile.xml b/DataFormats/METReco/BuildFile.xml
index 3990ea2805e..6b233fb46fa 100644
--- a/DataFormats/METReco/BuildFile.xml
+++ b/DataFormats/METReco/BuildFile.xml
@@ -3,6 +3,18 @@
 <use name="DataFormats/JetReco"/>
 <use name="DataFormats/EcalRecHit"/>
 <use name="DataFormats/HcalRecHit"/>
+<use name="DataFormats/CaloTowers"/>
+<use name="DataFormats/Candidate"/>
+<use name="DataFormats/DetId"/>
+<use name="DataFormats/EcalDetId"/>
+<use name="DataFormats/EgammaReco"/>
+<use name="DataFormats/GeometrySurface"/>
+<use name="DataFormats/GeometryVector"/>
+<use name="DataFormats/HcalDetId"/>
+<use name="DataFormats/HcalDigi"/>
+<use name="DataFormats/Math"/>
+<use name="DataFormats/TrackReco"/>
+<use name="DataFormats/VertexReco"/>
 <use name="root"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/Math/BuildFile.xml b/DataFormats/Math/BuildFile.xml
index ca9295240cd..5f8b2dd514d 100644
--- a/DataFormats/Math/BuildFile.xml
+++ b/DataFormats/Math/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="eigen"/>
 <use name="rootmath"/>
 <use name="DataFormats/Common"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/MuonReco/BuildFile.xml b/DataFormats/MuonReco/BuildFile.xml
index 87fc25933f0..9b38bb9ec73 100644
--- a/DataFormats/MuonReco/BuildFile.xml
+++ b/DataFormats/MuonReco/BuildFile.xml
@@ -5,6 +5,10 @@
 <use name="DataFormats/CSCRecHit"/>
 <use name="DataFormats/GEMRecHit"/>
 <use name="DataFormats/VertexReco"/>
+<use name="DataFormats/DetId"/>
+<use name="DataFormats/HcalDetId"/>
+<use name="DataFormats/Math"/>
+<use name="DataFormats/MuonDetId"/>
 <use name="rootmath"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/MuonSeed/BuildFile.xml b/DataFormats/MuonSeed/BuildFile.xml
index 2fb4d2e5b84..5f948ce5f68 100644
--- a/DataFormats/MuonSeed/BuildFile.xml
+++ b/DataFormats/MuonSeed/BuildFile.xml
@@ -2,6 +2,8 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/L1Trigger"/>
 <use name="DataFormats/TrackReco"/>
+<use name="DataFormats/TrajectorySeed"/>
+<use name="DataFormats/TrajectoryState"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/OnlineMetaData/BuildFile.xml b/DataFormats/OnlineMetaData/BuildFile.xml
index 7c537d9ebb9..78feda1bd1d 100644
--- a/DataFormats/OnlineMetaData/BuildFile.xml
+++ b/DataFormats/OnlineMetaData/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/Common"/>
+<use name="DataFormats/Provenance"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/ParticleFlowCandidate/BuildFile.xml b/DataFormats/ParticleFlowCandidate/BuildFile.xml
index 3cac6a37256..60d55ce8628 100644
--- a/DataFormats/ParticleFlowCandidate/BuildFile.xml
+++ b/DataFormats/ParticleFlowCandidate/BuildFile.xml
@@ -7,6 +7,8 @@
 <use name="DataFormats/GsfTrackReco"/>
 <use name="DataFormats/MuonReco"/>
 <use name="FWCore/Utilities"/>
+<use name="DataFormats/EgammaReco"/>
+<use name="DataFormats/VertexReco"/>
 <use name="rootcore"/>
 <use name="rootmath"/>
 <use name="clhepheader"/>
diff --git a/DataFormats/ProtonReco/BuildFile.xml b/DataFormats/ProtonReco/BuildFile.xml
index f87de591913..75667b3b6ff 100644
--- a/DataFormats/ProtonReco/BuildFile.xml
+++ b/DataFormats/ProtonReco/BuildFile.xml
@@ -1,5 +1,6 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/CTPPSReco"/>
+<use name="DataFormats/Math"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/RPCDigi/BuildFile.xml b/DataFormats/RPCDigi/BuildFile.xml
index 45612b7880a..4742344ab35 100644
--- a/DataFormats/RPCDigi/BuildFile.xml
+++ b/DataFormats/RPCDigi/BuildFile.xml
@@ -1,6 +1,9 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/MuonDetId"/>
 <use name="CondFormats/RPCObjects"/>
+<use name="DataFormats/MuonData"/>
+<use name="FWCore/MessageLogger"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/RecoCandidate/BuildFile.xml b/DataFormats/RecoCandidate/BuildFile.xml
index 6d98dad0f0f..6a7e5439614 100644
--- a/DataFormats/RecoCandidate/BuildFile.xml
+++ b/DataFormats/RecoCandidate/BuildFile.xml
@@ -8,6 +8,11 @@
 <use name="DataFormats/HcalRecHit"/>
 <use name="clhep"/>
 <use name="SimDataFormats/TrackingAnalysis"/>
+<use name="DataFormats/EcalRecHit"/>
+<use name="DataFormats/HcalDetId"/>
+<use name="DataFormats/Math"/>
+<use name="FWCore/MessageLogger"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/SiPixelCluster/BuildFile.xml b/DataFormats/SiPixelCluster/BuildFile.xml
index 7c537d9ebb9..d679816bd49 100644
--- a/DataFormats/SiPixelCluster/BuildFile.xml
+++ b/DataFormats/SiPixelCluster/BuildFile.xml
@@ -1,4 +1,6 @@
 <use name="DataFormats/Common"/>
+<use name="DataFormats/Provenance"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/SiPixelDetId/BuildFile.xml b/DataFormats/SiPixelDetId/BuildFile.xml
index 2582aa71146..842f5d3051d 100644
--- a/DataFormats/SiPixelDetId/BuildFile.xml
+++ b/DataFormats/SiPixelDetId/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/DetId"/>
 <use name="FWCore/Utilities"/>
 <use name="FWCore/MessageLogger"/>
+<use name="DataFormats/Common"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/SiPixelRawData/BuildFile.xml b/DataFormats/SiPixelRawData/BuildFile.xml
index 7c537d9ebb9..38b45babc72 100644
--- a/DataFormats/SiPixelRawData/BuildFile.xml
+++ b/DataFormats/SiPixelRawData/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/Common"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/SiStripCluster/BuildFile.xml b/DataFormats/SiStripCluster/BuildFile.xml
index 64d3e18e162..98341fd03c3 100644
--- a/DataFormats/SiStripCluster/BuildFile.xml
+++ b/DataFormats/SiStripCluster/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/TrajectoryState"/>
 <use name="DataFormats/SiStripDigi"/>
+<use name="DataFormats/SiStripDetId"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/SiStripCommon/BuildFile.xml b/DataFormats/SiStripCommon/BuildFile.xml
index b8bc952eb86..7c0e145f7da 100644
--- a/DataFormats/SiStripCommon/BuildFile.xml
+++ b/DataFormats/SiStripCommon/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="FWCore/MessageLogger"/>
 <use name="DataFormats/Common"/>
 <use name="DataFormats/SiStripDetId"/>
+<use name="DataFormats/FEDRawData"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/Streamer/BuildFile.xml b/DataFormats/Streamer/BuildFile.xml
index 0a3da27bfa9..ab124ca3e51 100644
--- a/DataFormats/Streamer/BuildFile.xml
+++ b/DataFormats/Streamer/BuildFile.xml
@@ -1,4 +1,6 @@
 <use name="DataFormats/Provenance"/>
+<use name="DataFormats/Common"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/TauReco/BuildFile.xml b/DataFormats/TauReco/BuildFile.xml
index df5fe8fe03f..ab47c5fbf0d 100644
--- a/DataFormats/TauReco/BuildFile.xml
+++ b/DataFormats/TauReco/BuildFile.xml
@@ -5,6 +5,8 @@
 <use name="DataFormats/TrackReco"/>
 <use name="DataFormats/JetReco"/>
 <use name="DataFormats/ParticleFlowCandidate"/>
+<use name="DataFormats/VertexReco"/>
+<use name="FWCore/MessageLogger"/>
 <flags LCG_DICT_HEADER="classes_hlt.h classes_1.h classes_2.h classes_3.h"/>
 <flags LCG_DICT_XML="classes_def_hlt.xml classes_def_1.xml classes_def_2.xml classes_def_3.xml"/>
 <export>
diff --git a/DataFormats/TestObjects/BuildFile.xml b/DataFormats/TestObjects/BuildFile.xml
index 78feda1bd1d..a99144ef6f7 100644
--- a/DataFormats/TestObjects/BuildFile.xml
+++ b/DataFormats/TestObjects/BuildFile.xml
@@ -1,5 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/Provenance"/>
+<use name="FWCore/SOA"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/TrackCandidate/BuildFile.xml b/DataFormats/TrackCandidate/BuildFile.xml
index eb75fa27154..bb47dc67ba9 100644
--- a/DataFormats/TrackCandidate/BuildFile.xml
+++ b/DataFormats/TrackCandidate/BuildFile.xml
@@ -2,6 +2,7 @@
 <use name="DataFormats/CLHEP"/>
 <use name="DataFormats/TrackingRecHit"/>
 <use name="DataFormats/TrajectorySeed"/>
+<use name="FWCore/Utilities"/>
 <use name="clhepheader"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/TrackerRecHit2D/BuildFile.xml b/DataFormats/TrackerRecHit2D/BuildFile.xml
index 81627d07696..d92749878b7 100644
--- a/DataFormats/TrackerRecHit2D/BuildFile.xml
+++ b/DataFormats/TrackerRecHit2D/BuildFile.xml
@@ -6,6 +6,16 @@
 <use name="DataFormats/Phase2TrackerCluster"/>
 <use name="FWCore/MessageLogger"/>
 <use name="Geometry/CommonDetUnit"/>
+<use name="DataFormats/DetId"/>
+<use name="DataFormats/GeometryCommonDetAlgo"/>
+<use name="DataFormats/GeometrySurface"/>
+<use name="DataFormats/GeometryVector"/>
+<use name="DataFormats/Math"/>
+<use name="DataFormats/SiPixelCluster"/>
+<use name="DataFormats/SiPixelDetId"/>
+<use name="DataFormats/SiStripCluster"/>
+<use name="DataFormats/SiStripDetId"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/DataFormats/TrackingRecHit/BuildFile.xml b/DataFormats/TrackingRecHit/BuildFile.xml
index c22f87d6e1d..e9c7b52166f 100644
--- a/DataFormats/TrackingRecHit/BuildFile.xml
+++ b/DataFormats/TrackingRecHit/BuildFile.xml
@@ -4,6 +4,9 @@
 <use name="Geometry/CommonDetUnit"/>
 <use name="DataFormats/GeometryCommonDetAlgo"/>
 <use name="FWCore/Utilities"/>
+<use name="DataFormats/DetId"/>
+<use name="DataFormats/GeometryVector"/>
+<use name="DataFormats/Math"/>
 <use name="clhep"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/TrajectoryState/BuildFile.xml b/DataFormats/TrajectoryState/BuildFile.xml
index ea3598810ab..6771c1c232a 100644
--- a/DataFormats/TrajectoryState/BuildFile.xml
+++ b/DataFormats/TrajectoryState/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/GeometryVector"/>
+<use name="DataFormats/Math"/>
 <use name="rootcore"/>
 <export>
   <lib name="1"/>
diff --git a/DataFormats/VertexReco/BuildFile.xml b/DataFormats/VertexReco/BuildFile.xml
index 061af954fdd..a8c7cac3582 100644
--- a/DataFormats/VertexReco/BuildFile.xml
+++ b/DataFormats/VertexReco/BuildFile.xml
@@ -1,5 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/TrackReco"/>
+<use name="DataFormats/Math"/>
+<use name="DataFormats/TrajectorySeed"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/FWCore/FWLite/BuildFile.xml b/FWCore/FWLite/BuildFile.xml
index 461f124c9d1..86cbe62d326 100644
--- a/FWCore/FWLite/BuildFile.xml
+++ b/FWCore/FWLite/BuildFile.xml
@@ -2,6 +2,7 @@
 <use name="DataFormats/Provenance"/>
 <use name="FWCore/PluginManager"/>
 <use name="FWCore/Utilities"/>
+<use name="FWCore/Reflection"/>
 <use name="rootcore"/>
 <export>
   <lib name="1"/>
diff --git a/FWCore/Modules/BuildFile.xml b/FWCore/Modules/BuildFile.xml
index 341123e945d..f547b0a833c 100644
--- a/FWCore/Modules/BuildFile.xml
+++ b/FWCore/Modules/BuildFile.xml
@@ -5,5 +5,7 @@
 <use name="FWCore/Sources"/>
 <use name="FWCore/Utilities"/>
 <use name="DataFormats/Common"/>
+<use name="FWCore/Reflection"/>
+<use name="FWCore/ServiceRegistry"/>
 <use name="boost"/>
 <flags EDM_PLUGIN="1"/>
diff --git a/FWCore/PrescaleService/BuildFile.xml b/FWCore/PrescaleService/BuildFile.xml
index 9e8fa8515c2..e0d187a3069 100644
--- a/FWCore/PrescaleService/BuildFile.xml
+++ b/FWCore/PrescaleService/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Provenance"/>
 <use name="FWCore/ParameterSet"/>
 <use name="FWCore/Utilities"/>
+<use name="FWCore/ServiceRegistry"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/FWCore/PythonFramework/BuildFile.xml b/FWCore/PythonFramework/BuildFile.xml
index 363852df493..13223f824ab 100644
--- a/FWCore/PythonFramework/BuildFile.xml
+++ b/FWCore/PythonFramework/BuildFile.xml
@@ -1,5 +1,11 @@
 <use name="FWCore/Framework"/>
 <use name="FWCore/PythonParameterSet"/>
+<use name="FWCore/Concurrency"/>
+<use name="FWCore/MessageLogger"/>
+<use name="FWCore/ParameterSet"/>
+<use name="FWCore/PluginManager"/>
+<use name="FWCore/ServiceRegistry"/>
+<use name="FWCore/Utilities"/>
 <use name="boost"/>
 <use name="py2-pybind11"/>
 <export>
diff --git a/FWCore/ServiceRegistry/BuildFile.xml b/FWCore/ServiceRegistry/BuildFile.xml
index 79ef410843e..e3086e319ae 100644
--- a/FWCore/ServiceRegistry/BuildFile.xml
+++ b/FWCore/ServiceRegistry/BuildFile.xml
@@ -2,6 +2,7 @@
 <use name="FWCore/ParameterSet"/>
 <use name="FWCore/PluginManager"/>
 <use name="FWCore/Utilities"/>
+<use name="FWCore/MessageLogger"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/FWCore/Services/BuildFile.xml b/FWCore/Services/BuildFile.xml
index f9f51d66f8c..ece100f8425 100644
--- a/FWCore/Services/BuildFile.xml
+++ b/FWCore/Services/BuildFile.xml
@@ -3,6 +3,7 @@
 <use name="FWCore/ParameterSet"/>
 <use name="FWCore/ServiceRegistry"/>
 <use name="FWCore/Utilities"/>
+<use name="FWCore/Catalog"/>
 <use name="boost"/>
 <use name="tinyxml2"/>
 <use name="rootcore"/>
diff --git a/FWCore/SharedMemory/BuildFile.xml b/FWCore/SharedMemory/BuildFile.xml
index b81e2600bec..c7a5650c1d6 100644
--- a/FWCore/SharedMemory/BuildFile.xml
+++ b/FWCore/SharedMemory/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="boost"/>
+<use name="FWCore/Utilities"/>
 <use name="rootcore"/>
 <export>
   <lib name="1"/>
diff --git a/FWCore/Sources/BuildFile.xml b/FWCore/Sources/BuildFile.xml
index 8e095391dc3..874e1b87c20 100644
--- a/FWCore/Sources/BuildFile.xml
+++ b/FWCore/Sources/BuildFile.xml
@@ -5,6 +5,8 @@
 <use name="FWCore/PluginManager"/>
 <use name="FWCore/Reflection"/>
 <use name="FWCore/Utilities"/>
+<use name="DataFormats/Common"/>
+<use name="FWCore/Version"/>
 <use name="tbb"/>
 <export>
   <lib name="1"/>
diff --git a/FWCore/TFWLiteSelectorTest/BuildFile.xml b/FWCore/TFWLiteSelectorTest/BuildFile.xml
index 88df63caa9b..21a7647fa44 100644
--- a/FWCore/TFWLiteSelectorTest/BuildFile.xml
+++ b/FWCore/TFWLiteSelectorTest/BuildFile.xml
@@ -1,5 +1,8 @@
 <use name="DataFormats/Common"/>
 <use name="FWCore/TFWLiteSelector"/>
+<use name="DataFormats/TestObjects"/>
+<use name="FWCore/Framework"/>
+<use name="FWCore/Utilities"/>
 <use name="rootgraphics"/>
 <export>
   <lib name="1"/>
diff --git a/FWCore/TestProcessor/BuildFile.xml b/FWCore/TestProcessor/BuildFile.xml
index 1dac13262ab..c590ba41dd6 100644
--- a/FWCore/TestProcessor/BuildFile.xml
+++ b/FWCore/TestProcessor/BuildFile.xml
@@ -1,5 +1,12 @@
 <use name="FWCore/Framework"/>
 <use name="FWCore/ParameterSetReader"/>
+<use name="DataFormats/Common"/>
+<use name="DataFormats/Provenance"/>
+<use name="FWCore/Concurrency"/>
+<use name="FWCore/ParameterSet"/>
+<use name="FWCore/PluginManager"/>
+<use name="FWCore/ServiceRegistry"/>
+<use name="FWCore/Utilities"/>
 <use name="boost"/>
 <export>
   <lib name="1"/>
diff --git a/SimDataFormats/CaloAnalysis/BuildFile.xml b/SimDataFormats/CaloAnalysis/BuildFile.xml
index 381060c1ff7..992a01ec133 100644
--- a/SimDataFormats/CaloAnalysis/BuildFile.xml
+++ b/SimDataFormats/CaloAnalysis/BuildFile.xml
@@ -3,6 +3,7 @@
 <use name="DataFormats/HepMCCandidate"/>
 <use name="SimDataFormats/Track"/>
 <use name="SimDataFormats/CaloHit"/>
+<use name="FWCore/MessageLogger"/>
 <use name="clhepheader"/>
 <export>
   <lib name="1"/>
diff --git a/SimDataFormats/CaloTest/BuildFile.xml b/SimDataFormats/CaloTest/BuildFile.xml
index aee6233e8d1..7ce66398ef5 100644
--- a/SimDataFormats/CaloTest/BuildFile.xml
+++ b/SimDataFormats/CaloTest/BuildFile.xml
@@ -2,6 +2,7 @@
 <use name="FWCore/MessageLogger"/>
 <use name="SimDataFormats/CaloHit"/>
 <use name="DataFormats/HcalDetId"/>
+<use name="DataFormats/Math"/>
 <use name="boost"/>
 <export>
   <lib name="1"/>
diff --git a/SimDataFormats/DigiSimLinks/BuildFile.xml b/SimDataFormats/DigiSimLinks/BuildFile.xml
index 1faac2de533..6b9556c3cb0 100644
--- a/SimDataFormats/DigiSimLinks/BuildFile.xml
+++ b/SimDataFormats/DigiSimLinks/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="SimDataFormats/EncodedEventId"/>
 <use name="DataFormats/MuonDetId"/>
+<use name="DataFormats/MuonData"/>
 <use name="boost"/>
 <export>
   <lib name="1"/>
diff --git a/SimDataFormats/HiGenData/BuildFile.xml b/SimDataFormats/HiGenData/BuildFile.xml
index 91637d7429b..d6f7ade7655 100644
--- a/SimDataFormats/HiGenData/BuildFile.xml
+++ b/SimDataFormats/HiGenData/BuildFile.xml
@@ -1,4 +1,5 @@
 <use name="DataFormats/HepMCCandidate"/>
+<use name="DataFormats/Common"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/SimDataFormats/JetMatching/BuildFile.xml b/SimDataFormats/JetMatching/BuildFile.xml
index 3d9db25dc48..52c1ff34715 100644
--- a/SimDataFormats/JetMatching/BuildFile.xml
+++ b/SimDataFormats/JetMatching/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/HepMCCandidate"/>
 <use name="DataFormats/JetReco"/>
+<use name="DataFormats/Math"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/SimDataFormats/Track/BuildFile.xml b/SimDataFormats/Track/BuildFile.xml
index 2ad60e9bfd7..a9f8fc715da 100644
--- a/SimDataFormats/Track/BuildFile.xml
+++ b/SimDataFormats/Track/BuildFile.xml
@@ -1,6 +1,7 @@
 <use name="DataFormats/Common"/>
 <use name="DataFormats/Math"/>
 <use name="SimDataFormats/EncodedEventId"/>
+<use name="FWCore/Utilities"/>
 <export>
   <lib name="1"/>
 </export>
diff --git a/SimDataFormats/TrackingAnalysis/BuildFile.xml b/SimDataFormats/TrackingAnalysis/BuildFile.xml
index b311f418f8e..7b8a910f930 100644
--- a/SimDataFormats/TrackingAnalysis/BuildFile.xml
+++ b/SimDataFormats/TrackingAnalysis/BuildFile.xml
@@ -6,6 +6,7 @@
 <use name="SimDataFormats/GeneratorProducts"/>
 <use name="SimDataFormats/Track"/>
 <use name="SimDataFormats/Vertex"/>
+<use name="FWCore/MessageLogger"/>
 <use name="clhepheader"/>
 <export>
   <lib name="1"/>
